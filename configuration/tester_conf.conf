user					nobody;
worker_processes 		1;
pid						logs/nginx.pid;
worker_connections		1024;
client_max_body_size	100M;


server {
	listen 8080 default_server;
	# server_name default_server;
	server_name localhost;

	error_page 404 /error404.html;
	root /ulti_tester;

	location = /error40x.html {
	}

	location / {
		allowed_methods GET HEAD;
		index index.html;
		autoindex on;
	}

	location = /2/ {
		rewrite /;
		index second.html;
	}

	location = /virtual/ {
		autoindex off;
	}

	location = /protected/ {
		cgi ./ulti_tester/cgi-bin/print_cgi;
		auth_basic Admin:basicpass;
		index index;
	}

	location = /post/ {
		cgi ./ulti_tester/cgi-bin/print_cgi;
		allowed_methods GET POST PUT DELETE;
		client_max_body_size 1000;
		autoindex off;
		rewrite ulti_tester/tmp/;
	}

	location = /put/ {
		rewrite /;
	}

	location = /index/ {
		rewrite /;
		index index.html;
		autoindex on;
	}
}

# server {
# 	listen 8081;
# 	server_name localhost;
# 	server_name localhost default_server;
# 	location / {
# 		root /ulti_tester;
# 		index second.html;
# 	}
# }

# server {
# 	listen 8080;
# 	server_name google.com;
# 	root /ulti_tester;
# 	location / {
# 		index google.html;
# 	}
# 	location /auto {
# 		autoindex on;
# 	}
# }
